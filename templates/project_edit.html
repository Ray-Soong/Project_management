{% extends "base.html" %}

{% block title %}编辑项目 - 项目管理系统{% endblock %}

{% block content %}
<h1 class="page-title">编辑项目</h1>

<div class="card" style="max-width: 800px; margin: 0 auto;">
    <h2 style="margin-bottom: 1.5rem; color: #333; text-align: center;">项目信息</h2>
    <p style="text-align: center; color: #666; margin-bottom: 2rem;">当前状态: <strong>{{ project.status }}</strong></p>
    
    <form method="post">
        {{ form.hidden_tag() }}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                {{ form.name.label(class="form-label") }}
                {{ form.name(class="form-control", placeholder="请输入项目名称") }}
            </div>
            
            <div class="form-group">
                {{ form.manager.label(class="form-label") }}
                {{ form.manager(class="form-control", placeholder="请输入项目管理者姓名") }}
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                {{ form.start_date.label(class="form-label") }}
                {{ form.start_date(class="form-control") }}
            </div>
            
            <div class="form-group">
                {{ form.planned_end_date.label(class="form-label") }}
                {{ form.planned_end_date(class="form-control") }}
            </div>
            
            <div class="form-group">
                {{ form.estimated_completion_date.label(class="form-label") }}
                {{ form.estimated_completion_date(class="form-control") }}
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                {{ form.estimated_hours.label(class="form-label") }}
                {{ form.estimated_hours(class="form-control", placeholder="预计需要的开发工时", step="0.5", min="0") }}
            </div>
            
            <div class="form-group">
                {{ form.contract_amount.label(class="form-label") }}
                {{ form.contract_amount(class="form-control", placeholder="请输入合同金额", step="0.01") }}
            </div>
        </div>
        
        <div class="form-group">
            {{ form.assigned_developers.label(class="form-label") }}
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px; border: 2px solid #e1e5e9;">
                {% for subfield in form.assigned_developers %}
                    <div style="margin-bottom: 0.5rem;">
                        {{ subfield() }} {{ subfield.label() }}
                    </div>
                {% endfor %}
                {% if not form.assigned_developers.choices %}
                    <p style="color: #666; margin: 0;">暂无可分配的责任工程师</p>
                {% endif %}
            </div>
        </div>
        
        <div class="form-group">
            {{ form.status.label(class="form-label") }}
            {{ form.status(class="form-control") }}
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            {{ form.submit(class="btn btn-primary", style="padding: 0.75rem 2rem; font-size: 1rem;", value="更新项目") }}
            <a href="{{ url_for('project_detail', project_id=project.id) }}" class="btn btn-secondary" style="padding: 0.75rem 2rem; font-size: 1rem; margin-left: 1rem;">取消</a>
        </div>
    </form>
</div>

<style>
@media (max-width: 768px) {
    div[style*="grid-template-columns"] {
        grid-template-columns: 1fr !important;
    }
}
</style>
{% endblock %}
